set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term alacritty
set $menu wofi --show drun

font pango:Liberation Sans 10

exec swaybg -c #1e1e2e

input type:touchpad {
    tap enabled
    tap_button_map lrm
    natural_scroll enabled
    dwt enabled
    accel_profile adaptive
    pointer_accel 0.3
    scroll_method two_finger
    click_method clickfinger
    drag enabled
    drag_lock enabled
    middle_emulation enabled
}

# Basic window management
bindsym $mod+Return exec $term
bindsym $mod+Shift+q kill
bindsym $mod+s exec $menu
bindsym $mod+Shift+s exec ~/.config/sway/scripts/power-menu.sh
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev
bindsym $mod+Shift+r reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -b 'Yes' 'swaymsg exit'

# Focus movement
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move windows
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move to workspaces
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Layout management
bindsym $mod+Shift+v splith
bindsym $mod+v splitv
bindsym $mod+z layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+t layout toggle split
bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Resize mode
mode "resize" {
    bindsym $left resize shrink width 20px
    bindsym $down resize grow height 20px
    bindsym $up resize shrink height 20px
    bindsym $right resize grow width 20px
    bindsym Left resize shrink width 20px
    bindsym Down resize grow height 20px
    bindsym Up resize shrink height 20px
    bindsym Right resize grow width 20px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Screenshots
bindsym $mod+Print exec grim ~/Pictures/screenshots/screenshot-$(date +%Y%m%d-%H%M%S).png
bindsym $mod+Shift+Print exec grim -g "$(slurp)" ~/Pictures/screenshots/screenshot-$(date +%Y%m%d-%H%M%S).png
bindsym Print exec grim - | wl-copy
bindsym Shift+Print exec grim -g "$(slurp)" - | wl-copy

# Audio controls (Function keys)
bindsym XF86AudioRaiseVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Brightness controls (Function keys)
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-

# Application shortcuts
bindsym $mod+e exec thunar
bindsym $mod+x exec swaylock -f -c 000000 -i ~/Pictures/wallpapers/lockscreen.jpg --show-failed-attempts --show-keyboard-layout --indicator-caps-lock
bindsym $mod+n exec $term -e nvim
bindsym $mod+b exec firefox
bindsym $mod+p exec $term -e btop
bindsym $mod+m exec $term -e cmus
bindsym $mod+Shift+m $term -e logseq
bindsym $mod+Escape exec makoctl dismiss
bindsym $mod+Shift+Escape exec makoctl dismiss-all

# Window rules for productivity
for_window [app_id="thunar"] floating enable, resize set 1280 720
for_window [app_id="logseq"] floating enable, resize set 1600 900
for_window [app_id="cmus"] floating enable, resize set 800 600
for_window [app_id="blueberry"] floating enable, resize set 640 480
for_window [app_id="pavucontrol"] floating enable, resize set 640 480

# Appearance
gaps inner 5
gaps outer 2
default_border pixel 2
default_floating_border pixel 2

# Catppuccin theme
client.focused          #89b4fa #1e1e2e #cdd6f4 #89b4fa #89b4fa
client.focused_inactive #6c7086 #1e1e2e #cdd6f4 #6c7086 #6c7086
client.unfocused        #45475a #1e1e2e #a6adc8 #45475a #45475a
client.urgent           #f38ba8 #1e1e2e #cdd6f4 #f38ba8 #f38ba8

bar {
    swaybar_command waybar
}

# Startup applications
exec mako
exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec wlsunset -l 14.6 -L 120.98
exec swayidle -w \
    timeout 300 'swaylock -f -c 000000 -i ~/Pictures/wallpapers/lockscreen.jpg --show-failed-attempts --show-keyboard-layout --indicator-caps-lock' \
    timeout 600 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"'
